/*! cornerstoneWebImageLoader - v0.5.2 - 2015-09-06 | (c) 2015 Chris Hafey | https://github.com/chafey/cornerstoneWebImageLoader */
;cornerstoneWebImageLoader={};(function(h,g,a){var e=document.createElement("canvas");var d="";var i={beforeSend:function(j){}};function b(k,j){var r=k.naturalHeight;var l=k.naturalWidth;function m(){var y=n();var s=y.data;var x=k.naturalHeight*k.naturalWidth;var v=new Uint8Array(x*4);var u=0;var w=0;for(var t=0;t<x;t++){v[w++]=s[u++];v[w++]=s[u++];v[w++]=s[u++];v[w++]=255;u++}return v}function n(){var s;if(d!==j){e.height=k.naturalHeight;e.width=k.naturalWidth;s=e.getContext("2d");s.drawImage(k,0,0);d=j}else{s=e.getContext("2d")}var t=s.getImageData(0,0,k.naturalWidth,k.naturalHeight);return t}function o(){if(d===j){return e}e.height=k.naturalHeight;e.width=k.naturalWidth;var s=e.getContext("2d");s.drawImage(k,0,0);d=j;return e}function p(){return k}var q={imageId:j,minPixelValue:0,maxPixelValue:255,slope:1,intercept:0,windowCenter:127,windowWidth:256,render:g.renderColorImage,getPixelData:m,getImageData:n,getCanvas:o,getImage:p,rows:r,columns:l,height:r,width:l,color:true,columnPixelSpacing:1,rowPixelSpacing:1,invert:false,sizeInBytes:r*l*4};return q}function c(k){var j=h.Deferred();var l=new Image();var m=new XMLHttpRequest();m.responseType="arraybuffer";m.open("GET",k,true);i.beforeSend(m);m.onload=function(r){var q=new Uint8Array(this.response);var o=new Blob([q],{type:"image/jpeg"});var n=window.URL||window.webkitURL;var p=n.createObjectURL(o);l.src=p;l.onload=function(){var s=b(l,k);j.resolve(s);n.revokeObjectURL(p)};l.onerror=function(){n.revokeObjectURL(p);j.reject()}};m.onprogress=function(q){if(q.lengthComputable){var n=q.loaded;var p=q.total;var o=Math.round((n/p)*100);h(g).trigger("CornerstoneImageLoadProgress",{imageId:k,loaded:n,total:p,percentComplete:o})}};m.send();return j}function f(j){i=j}g.registerImageLoader("http",c);g.registerImageLoader("https",c);a.configure=f;return g}($,cornerstone,cornerstoneWebImageLoader));