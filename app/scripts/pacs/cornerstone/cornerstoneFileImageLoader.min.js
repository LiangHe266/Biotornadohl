/*! cornerstone-file-image-loader - v0.5.1 - 2015-04-04 | (c) 2014 Chris Hafey | https://github.com/chafey/cornerstoneFileImageLoader */
;var cornerstoneFileImageLoader=(function(f,e,a){if(a===undefined){a={}}function b(h){if(h==="RGB"||h==="PALETTE COLOR"||h==="YBR_FULL"||h==="YBR_FULL_422"||h==="YBR_PARTIAL_422"||h==="YBR_PARTIAL_420"||h==="YBR_RCT"){return true}else{return false}}function d(k,j,l){if(l===undefined){l=0}var i=k.string("x00280004");var h=b(i);if(h===false){return cornerstoneWADOImageLoader.makeGrayscaleImage(j,k,k.byteArray,i,l)}else{return cornerstoneWADOImageLoader.makeColorImage(j,k,k.byteArray,i,l)}}var c={};function g(l){var r=f.Deferred();var h=l;h=h.substring(12);var i=h.indexOf("frame=");var j;if(i!==-1){var n=h.substr(i+6);j=parseInt(n);h=h.substr(0,i-1)}if(j!==undefined&&c.hasOwnProperty(h)){var p=c[h];var q=d(p,l,j);q.then(function(s){r.resolve(s)},function(){r.reject()});return r}var k=parseInt(h);var m=a.getFile(k);if(m===undefined){r.reject("unknown file index "+h);return r}var o=new FileReader();o.onload=function(w){var t=w.target.result;var s=new Uint8Array(t);var v=dicomParser.parseDicom(s);if(j!==undefined){c[h]=v}var u=d(v,l,j);u.then(function(x){r.resolve(x)},function(){r.reject()})};o.readAsArrayBuffer(m);return r}e.registerImageLoader("dicomfile",g);return a}($,cornerstone,cornerstoneFileImageLoader));var cornerstoneFileImageLoader=(function(a){if(a===undefined){a={}}var c=[];function d(f){var g=c.push(f);return g-1}function e(f){return c[f]}function b(){c=[]}a.addFile=d;a.getFile=e;a.purge=b;return a}(cornerstoneFileImageLoader));